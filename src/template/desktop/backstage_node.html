{% extends 'common/base.html' %}
{% block extra_sidebar %}
{% include 'rightbar/backstage_siblings.html' %}
{% endblock %}

{% block content %}
    <div id="Content">
        {% if message %}
        <div class="box">
            <div class="inner">{{ message }}</div>
        </div>
        <div class="sep20"></div>
        {% endif %}
        <div class="box">
            <div class="cell"><div class="fr"><a href="/go/{{ node.name }}">返回节点</a></div><span class="fade"><a href="/">{{ site.title }}</a> <span class="chevron">&nbsp;›&nbsp;</span> <a href="/backstage">后台</a> <span class="chevron">&nbsp;›&nbsp;</span> <a href="/backstage/section/{{ section.name }}">{{ section.title|escape }}</a> <span class="chevron">&nbsp;›&nbsp;</span> {{ node.title|escape }}</span></div>
            <div class="inner">
               {% if errors %}
                <strong>请解决以下错误之后继续。</strong>
                <div class="sep10"></div>
                <ul>
                    {% if node_name_error %}
                    <li>{{ node_name_error_message }}</li>
                    {% endif %}
                    {% if node_title_error %}
                    <li>{{ node_title_error_message }}</li>
                    {% endif %}
                    {% if node_title_alternative_error %}
                    <li>{{ node_title_alternative_error_message }}</li>
                    {% endif %}
                    {% if node_category_error %}
                    <li>{{ node_category_error_message }}</li>
                    {% endif %}
                    {% if node_header_error %}
                    <li>{{ node_header_error_message }}</li>
                    {% endif %}
                    {% if node_footer_error %}
                    <li>{{ node_footer_error_message }}</li>
                    {% endif %}
                    {% if node_sidebar_error %}
                    <li>{{ node_sidebar_error_message }}</li>
                    {% endif %}
                </ul>
                <div class="sep10"></div>
                {% endif %}

                <form action="/backstage/node/{{ node.name }}" method="post" class="ui form">
                    <div class="field">
                        <label>
                            节点名
                        </label>
                        <input type="text" class="sl" name="name" value="{{ node_name|escape }}" />
                    </div>
                    <div class="field">
                        <label>
                            节点标题
                        </label>
                        <input type="text" class="sl" name="title" value="{{ node_title|escape }}" />
                    </div>
                    <div class="field">
                        <label>
                            节点副标题
                        </label>
                        <input type="text" class="sl" name="title_alternative" value="{{ node_title_alternative|escape }}" />
                    </div>
                    <div class="field">
                        <label>
                            节点开放分类
                        </label>
                        <input type="text" class="sl" name="category" value="{{ node_category|escape }}" />
                    </div>
                    <div class="field">
                        <label>Parent Node Name</label>
                        <input type="text" class="sl" name="parent_node_name" value="{{ node_parent_node_name|escape }}" maxlength="32" />
                    </div>
                    <div class="field">
                        <label>头部信息</label>
                    </div>
                    <div class="field">
                        <textarea class="mle" name="header">{{ node_header|escape }}</textarea>
                    </div>
                    <div class="field">
                        <label>尾部信息</label>
                    </div>
                    <div class="field">
                        <textarea class="mle" name="footer">{{ node_footer|escape }}</textarea>
                    </div>
                    <div class="field">
                        <label>侧栏信息</label>
                        <span class="fade">头部，尾部及侧栏可使用 HTML</span>
                    </div>
                    <div class="field">
                        <textarea class="mle tall" name="sidebar">{{ node_sidebar|escape }}</textarea>
                    </div>
                    <div class="field">
                        <label>侧栏广告代码</label>
                        <span class="fade">如果为空则使用系统的默认 Google AdSense 样式</span>
                    </div>
                    <div class="field">
                        <textarea class="mle" name="sidebar_ads">{{ node_sidebar_ads|escape }}</textarea>
                    </div>
                    <div class="field">
                        <td width="80" align="right">
                            节点主题数
                        </td>
                        <strong>{{ node.topics }}</strong>
                    </div>
                    <div class="field">
                        <input type="submit" value="保存" class="ui button" />
                    </div>
                </form>
            </div>
        </div>
        <div class="sep20"></div>
        <div class="box">
            <div class="cell">节点头像</div>
            <div class="cell">
                <table cellpadding="5" cellspacing="0" border="0">
                    <tr>
                        <td width="80" align="right">
                            当前的头像
                        </td>
                        <td width="200" align="left">
                                            {{ node|avatar("large")|safe }}&nbsp; 
                                            {{ node|avatar("normal")|safe }}&nbsp;
                                            {{ node|avatar("mini")|safe }}&nbsp;
                        </td>
                    </tr>
                </table>
            </div>
            <div class="inner">
                <form enctype="multipart/form-data" action="/backstage/node/{{ node.name }}/avatar" method="post">
                <span class="fade">支持 1MB 以内的 PNG / GIF / JPG 图片文件作为头像，推荐使用正方形的透明 PNG 图片以获得最佳效果。</span>
                <div class="sep5"></div>
                <table cellpadding="5" cellspacing="0" border="0">
                    <tr>
                        <td width="80" align="right">
                            选择图片文件
                        </td>
                        <td width="200" align="left">
                            <input type="file" name="avatar" />
                        </td>
                    </tr>
                    <tr>
                        <td width="80" align="right">
                        </td>
                        <td width="200" align="left">
                            <input type="submit" value="上传" class="ui button" />
                        </td>
                    </tr>
                </table>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
