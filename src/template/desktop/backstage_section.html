{% extends 'common/base.html' %}
{% block content %}
    <div id="Content">
        {% if message %}
        <div class="box">
            <div class="inner">{{ message }}</div>
        </div>
        <div class="sep20"></div>
        {% endif %}
        <div class="box">
            <div class="cell"><span class="fade"><a href="/">{{ site.title }}</a> <span class="chevron">&nbsp;›&nbsp;</span> <a href="/backstage">后台</a> <span class="chevron">&nbsp;›&nbsp;</span> {{ section.title|escape }}</span></div>
            <div class="inner">
                {% if errors %}
                <strong>请解决以下错误之后继续。</strong>
                <div class="sep10"></div>
                <ul>
                    {% if section_name_error %}
                    <li>{{ section_name_error_message }}</li>
                    {% endif %}
                    {% if section_title_error %}
                    <li>{{ section_title_error_message }}</li>
                    {% endif %}
                    {% if section_title_alternative_error %}
                    <li>{{ section_title_alternative_error_message }}</li>
                    {% endif %}
                    {% if section_header_error %}
                    <li>{{ section_header_error_message }}</li>
                    {% endif %}
                    {% if section_footer_error %}
                    <li>{{ section_footer_error_message }}</li>
                    {% endif %}
                </ul>
                <div class="sep10"></div>
                {% endif %}

                <form action="/backstage/section/{{ section.name }}" method="post" class="ui form">
                    <div class="field">
                        <label>区域名</label>
                        <input type="text" class="sl" name="name" value="{{ section_name|escape }}" />
                    </div>
                    <div class="field">
                        <label>区域标题</label>
                        <input type="text" class="sl" name="title" value="{{ section_title|escape }}" />
                    </div>
                    <div class="field">
                        <label>区域副标题</label>
                        <input type="text" class="sl" name="title_alternative" value="{{ section_title_alternative|escape }}" />
                    </div>
                    <div class="field">
                        <label>头部信息</label>
                        <textarea class="ml" name="header">{{ section_header|escape }}</textarea>
                    </div>
                    <div class="field">
                        <label>尾部信息</label>
                        <textarea class="ml" name="footer">{{ section_footer|escape }}</textarea>
                    </div>
                    <div class="field">
                        <label>区域节点数</label>
                        <strong>{{ section.nodes }}</strong>
                    </div>
                    <div class="field">
                        <input type="submit" value="保存" class="super normal button" />
                    </div>
                </form>
            </div>
        </div>
        <div class="sep20"></div>
        <div class="box">
            <div class="cell"><div class="fr"><a href="/backstage/new/node/{{ section.name }}" class="super normal button">添加新节点</a></div><span class="fade">最近修改过的节点</span></div>
            <div class="grid" style="font-size: 14px;">
                <table cellpadding="10" cellspacing="0" border="0" width="100%">
                    {% for node in recent_modified %}
                    <tr>
                        <td align="center" valign="middle" width="48" style="border-bottom: 1px solid #e2e2e2; border-right: 1px solid #e2e2e2;"><strong style="font-size: 24px; font-family: DINPro">{{ node.topics }}</strong></td>
                        <td align="left" valign="top" width="auto" style="border-bottom: 1px solid #e2e2e2; background-color: #f9f9f9;"><a href="/backstage/node/{{ node.name }}">{{ node.title|escape }}</a>
                        <div class="sep10"></div>
                        <span class="fade" style="font-size: 12px">Modified at {{ node.last_modified|timesince }} ago</span>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>
{% endblock %}
